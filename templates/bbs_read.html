{% extends "base.html" %}
{% block title %}BOARD{% endblock %}
{% block scripts %}
<style>
    .form-wrap {
        max-width: 820px;
        margin: 24px auto;
    }

    .form-table th {
        width: 140px;
        white-space: nowrap;
        background: #FFFBE6;
    }

    .form-table td input.form-control, .form-table td textarea.form-control {
        width: 100%;
    }

    .form-table textarea {
        min-height: 240px;
        resize: vertical;
    }
</style>
{% endblock %}
{% block content %}
<center>
    <img src="/static/img/board-banner.jpg" alt="banner image" style="border-radius: 10px">
    <p></p>
    <a href="/" style="text-decoration: none; color: inherit; cursor: pointer;">
        <Button class="btn btn-secondary" style="width: 80px">Home</Button>
    </a>
    <a href="/bbs" style="text-decoration: none; color: inherit; cursor: pointer;">
        <Button class="btn btn-secondary" style="width: 80px">Board</Button>
    </a>
    <hr>
    <h3>BOARD</h3>
    <hr>
    <div class="form-wrap">
        <div class="card shadow-sm">
            <div class="card-body">
                {# 이 화면은 "읽기/상세" 성격: 현재 form 태그 없이 read-only 필드들로 값만 표시 #}
                <table class="table table-bordered align-middle form-table mb-3">
                    <colgroup>
                        <col style="width:140px;">
                        <col>
                    </colgroup>
                    <tbody>
                    {# 글 번호 노출 행
                    - 주의: label for="title" 로 되어 있으나 실제 필드 id는 "no" → 접근성/시멘틱 측면에서 for/id 매칭 필요
                    - readonly로 표시만, 수정 불가 #}
                    <tr>
                        <th scope="row" style="color: white; background-color: black">
                            <label for="no" class="form-label mb-0">No</label> {# 실제로는 "No" 라벨이 더 적절 #}
                        </th>
                        <td>
                            {{row.no}}
                        </td>
                    </tr>
                    {# 제목 노출 행: /bbs/bbs_read/{no} 화면에서 읽기 전용으로 표시 #}
                    <tr>
                        <th scope="row" style="color: white; background-color: black">
                            <label for="title" class="form-label mb-0">Title</label>
                        </th>
                        <td>
                            {{row.title}}
                        </td>
                    </tr>
                    {# 본문 노출 행: textarea 읽기 전용
                    - 서버 출력 시 XSS 방지 위해 escape 여부 확인 필요(보안 정책에 따름)
                    - 길면 스크롤/높이 조절 #}
                    <tr>
                        <th scope="row" style="color: white; background-color: black">
                            <label for="content" class="form-label mb-0">Content</label>
                        </th>
                        <td>
                            {{row.content}}
                        </td>
                    </tr>
                    {# 작성자 노출 행:
                    - value 속성이 두 번 정의되어 있어(apple, {{row.writer}}) 브라우저는 마지막 값을 사용
                    - 불필요한 기본값 "apple"은 제거하는 편이 명확 #}
                    <tr>
                        <th scope="row" style="color: white; background-color: black">
                            <label for="writer" class="form-label mb-0">Writer</label>
                        </th>
                        <td>
                                {{row.writer}}
                        </td>
                    </tr>
                    {# 액션 버튼 묶음:
                    - List: 목록으로 이동
                    - Update: GET /bbs/bbs_update/{no} 수정 폼으로 이동
                    - Delete: POST /bbs/bbs_delete/{no} 삭제(확인창)
                    - CSRF를 적용한다면 hidden 토큰 필드를 추가해야 함 #}
                    <tr>
                        <td class="text-center" colspan="2">
                            <div class="d-flex gap-1 justify-content-center">
                                <a class="btn btn-sm btn-outline-success" href="/bbs_list" style="width: 80px">List</a>
                                <a class="btn btn-sm btn-outline-primary" href="/bbs_update/{{row.no}}" style="width: 80px">Update</a>
                                <form action="/bbs_delete" method="post" onsubmit="return confirm('삭제하시겠습니까?');">
                                    <!-- CSRF를 쓰는 경우 hidden 필드 추가 -->
                                    <input name="no" value="{{row.no}}" type="hidden" />
                                    {# <input type="hidden" name="csrf_token" value="{{ csrf_token }}"> #}
                                    <button type="submit" class="btn btn-sm btn-outline-danger" style="width: 80px">Delete</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% endblock %}